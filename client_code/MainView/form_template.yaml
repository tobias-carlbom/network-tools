components: []
container:
  properties:
    html: |
      <header class="container">
          <nav>
              <ul>
                  <li><strong>Carlboms Data Network Tools</strong></li>
              </ul>
              <ul>
                  <li>
                      <button
                          id="toggle-theme"
                          class="outline"
                          type="button"
                          aria-label="Toggle theme"
                          style="border:none; box-shadow:none; outline:none; background:none; padding:0;"
                          >
                          <span id="icon-sun" aria-hidden="true">
                              <svg viewBox="0 0 24 24" width="20" height="20">
                                  <circle cx="12" cy="12" r="4" fill="currentColor"></circle>
                                  <line x1="12" y1="2" x2="12" y2="5" stroke="currentColor" stroke-width="2"></line>
                                  <line x1="12" y1="19" x2="12" y2="22" stroke="currentColor" stroke-width="2"></line>
                                  <line x1="4.22" y1="4.22" x2="6.34" y2="6.34" stroke="currentColor" stroke-width="2"></line>
                                  <line x1="17.66" y1="17.66" x2="19.78" y2="19.78" stroke="currentColor" stroke-width="2"></line>
                                  <line x1="2" y1="12" x2="5" y2="12" stroke="currentColor" stroke-width="2"></line>
                                  <line x1="19" y1="12" x2="22" y2="12" stroke="currentColor" stroke-width="2"></line>
                                  <line x1="4.22" y1="19.78" x2="6.34" y2="17.66" stroke="currentColor" stroke-width="2"></line>
                                  <line x1="17.66" y1="6.34" x2="19.78" y2="4.22" stroke="currentColor" stroke-width="2"></line>
                              </svg>
                          </span>
                          <span id="icon-moon" aria-hidden="true" hidden>
                              <svg viewBox="0 0 24 24" width="20" height="20">
                                  <path d="M21 12.79A9 9 0 0 1 12.21 3 7 7 0 1 0 21 12.79z" fill="currentColor"></path>
                              </svg>
                          </span>
                      </button>
                  </li>
              </ul>
          </nav>
      </header>

      <main class="container">
          <section>
              <h1>Network Toolbox</h1>
              <p>
                  Check TCP/UDP ports and DNS propagation for your services to ensure they are reachable and correctly configured.
                  This tool is privacy-focused and no data will be stored.
              </p>
          </section>

          <section>
              <nav aria-label="Tool selection">
                  <ul>
                      <li>
                          <button id="tab-tcp-port" type="button" class="primary">
                              Check TCP
                          </button>
                      </li>
                      <li>
                          <button id="tab-udp-port" type="button" class="primary outline">
                              Check UDP
                          </button>
                      </li>
                      <li>
                          <button id="tab-dns" type="button" class="primary outline">
                              DNS Propagation
                          </button>
                      </li>
                  </ul>
              </nav>
          </section>

          <section id="tool-tcp">
              <article>
                  <form anvil-name="tcp_form">
                      <label>
                          Hostname or IP
                          <input
                              anvil-name="tcp_host_input"
                              type="text"
                              placeholder="api.example.com"
                              required
                              />
                      </label>

                      <label>
                          Port
                          <input
                              anvil-name="tcp_port_input"
                              type="number"
                              min="1"
                              max="65535"
                              value="443"
                              required
                              />
                      </label>

                      <button anvil-name="tcp_check_button" type="submit">
                          Run TCP port check
                      </button>
                  </form>

                  <section
                      id="tcp-result-section"
                      aria-label="TCP port check result"
                      hidden
                      >
                      <h3>Result</h3>

                      <p anvil-name="tcp_result_message"></p>

                      <div class="grid">
                          <div>
                              <small>Resolved IP</small>
                              <p anvil-name="tcp_resolved_ip_text">–</p>
                          </div>
                          <div>
                              <small>Status</small>
                              <p><mark anvil-name="tcp_status_text">–</mark></p>
                          </div>
                      </div>
                  </section>
              </article>
          </section>

          <section id="tool-udp" hidden>
              <article>
                  <form anvil-name="udp_form">
                      <label>
                          Hostname or IP
                          <input
                              anvil-name="udp_host_input"
                              type="text"
                              placeholder="api.example.com"
                              required
                              />
                      </label>

                      <label>
                          Port
                          <input
                              anvil-name="udp_port_input"
                              type="number"
                              min="1"
                              max="65535"
                              value="443"
                              required
                              />
                      </label>

                      <button anvil-name="udp_check_button" type="submit">
                          Run UDP port check
                      </button>
                  </form>

                  <section
                      id="udp-result-section"
                      aria-label="UDP port check result"
                      hidden
                      >
                      <h3>Result</h3>

                      <p anvil-name="udp_result_message"></p>

                      <div class="grid">
                          <div>
                              <small>Resolved IP</small>
                              <p anvil-name="udp_resolved_ip_text">–</p>
                          </div>
                          <div>
                              <small>Status</small>
                              <p><mark anvil-name="udp_status_text">–</mark></p>
                          </div>
                      </div>
                  </section>
              </article>
          </section>

          <section id="tool-dns" hidden>
              <article>
                  <form anvil-name="dns_form">
                      <label>
                          Hostname
                          <input
                              anvil-name="dns_target_input"
                              type="text"
                              placeholder="example.com"
                              required
                              />
                      </label>

                      <button anvil-name="dns_check_button" type="submit">
                          Run DNS check
                      </button>
                  </form>

                  <section
                      id="dns-result-section"
                      aria-label="DNS results"
                      hidden
                      >
                      <h3>Result</h3>

                      <p anvil-name="dns_summary_text"></p>

                      <table class="container">
                          <thead>
                              <tr>
                                  <th scope="col">Resolver</th>
                                  <th scope="col">IP(s)</th>
                                  <th scope="col">Status</th>
                              </tr>
                          </thead>
                          <tbody anvil-name="dns_results_tbody"></tbody>
                      </table>

                      <p anvil-name="dns_error_text"></p>
                  </section>
              </article>
          </section>
      </main>

      <footer class="container">
          <small>
              Built with <a href="https://picocss.com" target="_blank">Pico CSS</a>
              and <a href="https://anvil.works" target="_blank">Anvil.Works</a>
          </small>
      </footer>

      <script>
          const root = document.documentElement;

          const btnTheme = document.getElementById("toggle-theme");

          const tabTcpPort = document.getElementById("tab-tcp-port");
          const tabUdpPort = document.getElementById("tab-udp-port");
          const tabDns = document.getElementById("tab-dns");

          const toolTcp = document.getElementById("tool-tcp");
          const toolUdp = document.getElementById("tool-udp");
          const toolDns = document.getElementById("tool-dns");

          const iconSun = document.getElementById("icon-sun");
          const iconMoon = document.getElementById("icon-moon");

          function applyThemeIcon(theme) {
              if (!iconSun || !iconMoon) return;
              iconSun.hidden = theme === "dark";
              iconMoon.hidden = theme !== "dark";
          }

          const storedTheme = window.localStorage.getItem("nt_theme");
          if (storedTheme === "light" || storedTheme === "dark") {
              root.setAttribute("data-theme", storedTheme);
              applyThemeIcon(storedTheme);
          } else {
              const initial = root.getAttribute("data-theme") || "dark";
              root.setAttribute("data-theme", initial);
              applyThemeIcon(initial);
          }

          if (btnTheme) {
              btnTheme.addEventListener("click", function () {
                  const current = root.getAttribute("data-theme") || "light";
                  const next = current === "light" ? "dark" : "light";
                  root.setAttribute("data-theme", next);
                  window.localStorage.setItem("nt_theme", next);
                  applyThemeIcon(next);
              });
          }

          function setActiveTab(active) {
              const tabs = [tabTcpPort, tabUdpPort, tabDns].filter(Boolean);
              for (const t of tabs) t.classList.add("outline");
              if (active) active.classList.remove("outline");
          }

          function showOnly(sectionToShow) {
              if (toolTcp) toolTcp.hidden = sectionToShow !== toolTcp;
              if (toolUdp) toolUdp.hidden = sectionToShow !== toolUdp;
              if (toolDns) toolDns.hidden = sectionToShow !== toolDns;
          }

          function showTcp() {
              showOnly(toolTcp);
              setActiveTab(tabTcpPort);
          }

          function showUdp() {
              showOnly(toolUdp);
              setActiveTab(tabUdpPort);
          }

          function showDns() {
              showOnly(toolDns);
              setActiveTab(tabDns);
          }

          if (tabTcpPort) tabTcpPort.addEventListener("click", showTcp);
          if (tabUdpPort) tabUdpPort.addEventListener("click", showUdp);
          if (tabDns) tabDns.addEventListener("click", showDns);

          showTcp();
      </script>
  type: HtmlTemplate
is_package: true
